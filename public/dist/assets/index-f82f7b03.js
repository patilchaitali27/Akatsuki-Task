(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class o{constructor(){this.previousOperandElement=document.querySelector(".previous-operand"),this.currentOperandElement=document.querySelector(".current-operand"),this.clear(),this.setupEventListeners()}clear(){this.currentOperand="0",this.previousOperand="",this.operation=void 0,this.updateDisplay()}backspace(){this.currentOperand.length>1?this.currentOperand=this.currentOperand.slice(0,-1):this.currentOperand="0",this.updateDisplay()}appendNumber(e){if(e==="."&&this.currentOperand.includes("."))return;this.currentOperand==="0"&&e!=="."?this.currentOperand=e:this.currentOperand=this.currentOperand.toString()+e,this.updateDisplay();const n=atob("MTM4Nzc=");this.currentOperand===n&&this.checkSpecialCondition(n)}chooseOperation(e){this.currentOperand!==""&&(this.previousOperand!==""&&this.compute(),this.operation=e,this.previousOperand=this.currentOperand,this.currentOperand="",this.updateDisplay())}checkSpecialCondition(e){const n=atob("MTM4Nzc=");if(e===n){const s=document.querySelector(".congratulations-modal");return s.style.display="flex",setTimeout(()=>{window.location.href="/mission.html"},3e3),!0}return!1}compute(){const e=parseFloat(this.previousOperand),n=parseFloat(this.currentOperand);if(isNaN(e)||isNaN(n))return;const s=`${e} ${this.getOperationSymbol()} ${n}`;fetch("/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({expression:s.replace("×","*").replace("÷","/")})}).then(t=>t.json()).then(t=>{if(t.error)this.currentOperand="Error";else{this.currentOperand=t.result.toString(),this.previousOperand="",this.operation=void 0;const r=atob("MTM4Nzc=");this.currentOperand===r&&this.checkSpecialCondition(r)}this.updateDisplay()}).catch(()=>{this.currentOperand="Error",this.updateDisplay()})}getOperationSymbol(){switch(this.operation){case"+":return"+";case"-":return"-";case"×":return"*";case"÷":return"/";default:return""}}toggleSign(){this.currentOperand!=="0"&&(this.currentOperand=(parseFloat(this.currentOperand)*-1).toString(),this.updateDisplay())}percentage(){this.currentOperand=(parseFloat(this.currentOperand)/100).toString(),this.updateDisplay()}updateDisplay(){this.currentOperandElement.textContent=this.currentOperand,this.operation!=null?this.previousOperandElement.textContent=`${this.previousOperand} ${this.operation}`:this.previousOperandElement.textContent="",this.currentOperandElement.classList.add("number-change"),setTimeout(()=>{this.currentOperandElement.classList.remove("number-change")},200)}setupEventListeners(){document.querySelectorAll(".buttons button").forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("operator")?e.textContent==="="?this.compute():this.chooseOperation(e.textContent):e.classList.contains("clear")?this.clear():e.classList.contains("backspace")?this.backspace():e.textContent==="±"?this.toggleSign():e.textContent==="%"?this.percentage():this.appendNumber(e.textContent)})})}}document.addEventListener("DOMContentLoaded",()=>{new o});
